<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Steal a Brainrot ‚Äî Game</title>
<style>
  :root{
    --bg:#0f0f12;
    --panel:#141417d9;
    --accent1:linear-gradient(90deg,#8b5cf6,#06b6d4);
    --glass: rgba(255,255,255,0.03);
    --text:#e6eef6;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    height:100vh;
    font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: radial-gradient(1200px 600px at 10% 10%, rgba(98,0,238,0.12), transparent),
                radial-gradient(800px 400px at 90% 90%, rgba(6,182,212,0.06), transparent),
                var(--bg);
    color:var(--text);
    overflow:hidden;
  }

  #login{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:1000;
    backdrop-filter: blur(6px);
  }
  .login-card{
    width:360px;
    padding:24px;
    border-radius:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    box-shadow: 0 6px 30px rgba(0,0,0,0.6);
    text-align:center;
  }
  .login-card h2{margin:0 0 12px 0; font-size:20px; letter-spacing:0.6px}
  .login-card input{
    width:100%; padding:10px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.06);
    background:transparent; color:var(--text); margin-top:8px;
  }
  .btn{
    display:inline-block; padding:10px 14px; border-radius:10px; border:none; cursor:pointer;
    font-weight:600; margin-top:12px;
  }
  .btn-primary{ background: linear-gradient(90deg,#7c3aed,#06b6d4); color:white; box-shadow: 0 6px 20px rgba(6,182,212,0.06); }

  #mainArea{
    position:relative;
    width:100%;
    height:100vh;
    overflow:hidden;
    display:flex;
    flex-direction:column;
  }

  #scroll-area {
    position: fixed;
    top: 50%;
    left: 0;
    width: 100%;
    height: 200px;
    overflow: visible;
    pointer-events: none;
    z-index: 1000;
}
  .scroll-row{ position:absolute; left:0; right:0; height:40px; display:block; }
  .scroll-text{
    position:absolute; white-space:nowrap; padding:8px 12px; border-radius:8px;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.04); backdrop-filter: blur(4px);
    pointer-events:auto; cursor:pointer; user-select:none; font-weight:600; transform: translateZ(0);
  }

#bottombar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 80px;
    background: rgba(20,20,30,0.95);
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 18px;
    overflow-x: auto;
    overflow: visible;
    border-top: 1px solid rgba(255,255,255,0.05);
    z-index: 1100;
}

  .brainrot{
    min-width:64px; height:64px;
    background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.12));
    border-radius:10px; display:flex; align-items:center; justify-content:center;
    font-size:12px; font-weight:700; position:relative; flex-shrink:0;
    cursor:pointer; transition: transform .2s ease;
  }
  .brainrot:hover{ transform: translateY(-6px) }

  #money {
    position: fixed;
    bottom: 90px; left: 15px;
    font-size: 20px; font-weight: bold; color: #ffd700;
    text-shadow: 0 0 8px #000;
    z-index: 1200;
}

  #zonaLibreBtn, #zonaNormalBtn{
    position:fixed; top:50%; transform:translateY(-50%);
    padding:12px 14px; border-radius:12px; border:none; cursor:pointer;
    font-weight:800; z-index:1200; box-shadow: 0 8px 24px rgba(0,0,0,0.45);
  }
  #zonaLibreBtn{
    right:12px; background:linear-gradient(90deg,#ff0080,#ffcc00); color:#0b0b0b;
  }
  #zonaNormalBtn{
    left:12px; background:linear-gradient(90deg,#00d084,#00c2ff); color:#041014;
  }

  #mainArea.free-zone{ background: linear-gradient(0deg, rgba(0,0,0,0.0), rgba(0,0,0,0.0)); }
  #mainArea.free-zone #zoneOverlay{ display:block; }
  #zoneOverlay{
    position:absolute; inset:0; background:#1fbf57; display:none; z-index:900;
  }

  #rainbowSquare{
    position:absolute; width:64px; height:64px; border-radius:8px;
    background: conic-gradient(#ff004f,#ff9900,#ffee00,#00e676,#00e5ff,#6a00ff,#ff004f);
    box-shadow: 0 8px 30px rgba(0,0,0,0.4); z-index:1001;
    display:flex; align-items:center; justify-content:center;
    color:#07111a; font-weight:900; user-select:none; cursor:grab;
  }

  #controlsCluster{
    position:fixed; right:20px; top:18vh; display:flex; flex-direction:column;
    gap:8px; z-index:1100;
  }
  .dir-row{ display:flex; gap:8px; justify-content:center; }
  .dir-btn{
    width:48px; height:48px; border-radius:10px; border:none; cursor:pointer;
    font-weight:800; font-size:16px; backdrop-filter: blur(6px);
    background:rgba(255,255,255,0.04); color:var(--text);
    box-shadow: 0 6px 18px rgba(0,0,0,0.45);
  }

  .floating-clone{
    position:fixed; padding:8px 10px; border-radius:8px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));
    border:1px solid rgba(255,255,255,0.03); pointer-events:none;
    z-index:2000; transition: transform .6s cubic-bezier(.2,.9,.2,1), opacity .2s;
  }

</style>
</head>
<body>

<div id="login">
  <div class="login-card">
    <h2>Steal a Brainrot</h2>
    <input id="username" placeholder="Nombre de usuario" />
    <br /><button id="loginBtn" class="btn btn-primary">Iniciar sesi√≥n</button>
  </div>
</div>

<button id="zonaNormalBtn">Zona Normal</button>
<button id="zonaLibreBtn">Zona Libre</button>

<div id="mainArea">
  <div id="zoneOverlay"></div>
  <div id="scroll-area"></div>
  <div id="bottombar"></div>
  <div id="money">üí∞ Dinero: 0</div>
  <div id="rainbowSquare" style="display:none; left:40%; top:40%;">üåà</div>
  <div id="controlsCluster" style="display:none;">
    <div class="dir-row"><button class="dir-btn" id="btnUp">‚Üë</button></div>
    <div class="dir-row">
      <button class="dir-btn" id="btnLeft">‚Üê</button>
      <button class="dir-btn" id="btnDown">‚Üì</button>
      <button class="dir-btn" id="btnRight">‚Üí</button>
    </div>
  </div>
</div>

<script>
const brainrotsDisponibles = [
  {name:"Hackerini Ikerini",price:0,income:100,image:"https://www.imagar.com/wp-content/uploads/2020/11/analista_programador-scaled-1.jpg"},
  {name:"Brainrot B",price:500,income:1000,image:"https://via.placeholder.com/80?text=B"},
  {name:"Baloncestini Noahsini",price:2000,income:200,image:"https://via.placeholder.com/80?text=N"},
  {name:"El Lukinelli",price:1000000,income:500000,image:"https://www.wesco.com/content/dam/wesco/assets/logos/brands/algo-logo_300x175.png"},
];

let playerData={username:'',money:0,brainrots:[]};

function formatMoney(n){
  n=Math.floor(n);
  if(n>=1e9)return(n/1e9).toFixed(1).replace(/\.0$/,'')+'B';
  if(n>=1e6)return(n/1e6).toFixed(1).replace(/\.0$/,'')+'M';
  if(n>=1e3)return(n/1e3).toFixed(1).replace(/\.0$/,'')+'k';
  return String(n);
}
function saveData(){localStorage.setItem('playerData',JSON.stringify(playerData));}

const loginDiv=document.getElementById('login');
const loginBtn=document.getElementById('loginBtn');
const usernameInput=document.getElementById('username');
const scrollArea=document.getElementById('scroll-area');
const bottombar=document.getElementById('bottombar');
const moneyText=document.getElementById('money');
const zonaLibreBtn=document.getElementById('zonaLibreBtn');
const zonaNormalBtn=document.getElementById('zonaNormalBtn');
const mainArea=document.getElementById('mainArea');
const zoneOverlay=document.getElementById('zoneOverlay');
const rainbowSquare=document.getElementById('rainbowSquare');
const controlsCluster=document.getElementById('controlsCluster');
const btnUp=document.getElementById('btnUp');
const btnDown=document.getElementById('btnDown');
const btnLeft=document.getElementById('btnLeft');
const btnRight=document.getElementById('btnRight');

function updateMoney(){moneyText.textContent=`üí∞ Dinero: ${formatMoney(playerData.money)}`;}

function addBrainrotToBar(brainrot){
  const div=document.createElement('div');
  div.className='brainrot';
  div.textContent=brainrot.name;

  const sellBtn=document.createElement('button');
  sellBtn.textContent='Vender';
  sellBtn.style.position='absolute';
  sellBtn.style.top='-36px';
  sellBtn.style.left='50%';
  sellBtn.style.transform='translateX(-50%)';
  sellBtn.style.padding='6px 12px';
  sellBtn.style.background='linear-gradient(90deg,#ff3d3d,#ff6b6b)';
  sellBtn.style.color='#fff';
  sellBtn.style.border='none';
  sellBtn.style.borderRadius='8px';
  sellBtn.style.display='none';
  sellBtn.style.cursor='pointer';
  sellBtn.style.fontWeight='bold';
  sellBtn.style.boxShadow='0 0 10px rgba(0,0,0,0.4)';
  div.appendChild(sellBtn);

  div.addEventListener('click',()=>{
    document.querySelectorAll('.brainrot button').forEach(b=>b.style.display='none');
    sellBtn.style.display='block';
  });

  sellBtn.addEventListener('click',(e)=>{
    e.stopPropagation();
    const refund=brainrot.price===0?5:Math.floor(brainrot.price/2);
    playerData.money+=refund;
    const idx=playerData.brainrots.indexOf(brainrot);
    if(idx>-1)playerData.brainrots.splice(idx,1);
    div.remove();
    updateMoney();saveData();
  });

  bottombar.appendChild(div);
}

function renderBottombarFromData(){
  bottombar.innerHTML='';
  playerData.brainrots.forEach(addBrainrotToBar);
}

function createScrollText(){
  const proto=brainrotsDisponibles[Math.floor(Math.random()*brainrotsDisponibles.length)];
  const div=document.createElement('div');
  div.className='scroll-text';
  div.innerHTML = `
    <div style="
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:4px;
    ">
      <img src="${proto.image || 'https://via.placeholder.com/80'}"
           alt="${proto.name}"
           style="width:128px; height:128px; border-radius:10px; margin-bottom:6px; object-fit:cover; box-shadow:0 0 8px rgba(0,0,0,0.4);">
      <div style="font-weight:700; margin-bottom:4px;">${proto.name}</div>
      <div style="font-size:13px; opacity:0.9;">Comprar (${formatMoney(proto.price)})</div>
    </div>
  `;
  div.style.left=(scrollArea.clientWidth+100)+'px';
  div.style.top=Math.floor(Math.random()*200)+'px';
  scrollArea.appendChild(div);

  const speed=0.1+Math.random()*0.3;
  let last=performance.now();
  function step(ts){
    const dt=ts-last;last=ts;
    const x=parseFloat(div.style.left)-speed*dt;
    div.style.left=x+'px';
    if(x<-200){div.remove();return;}
    requestAnimationFrame(step);
  }
  requestAnimationFrame(step);

  div.addEventListener('click',()=>{
    if(playerData.money<proto.price)return alert('No tienes suficiente dinero');
    playerData.money-=proto.price;updateMoney();
    const newBr={...proto,id:Date.now()+Math.random()};
    playerData.brainrots.push(newBr);saveData();
    addBrainrotToBar(newBr);
    div.remove();
  });
}

setInterval(createScrollText,1400);

setInterval(()=>{
  const income=playerData.brainrots.reduce((s,b)=>s+(b.income||0),0);
  playerData.money+=income;updateMoney();saveData();
},1000);

zonaLibreBtn.onclick=()=>{mainArea.classList.add('free-zone');zoneOverlay.style.display='block';rainbowSquare.style.display='flex';controlsCluster.style.display='block';loginDiv.style.display='none';};
zonaNormalBtn.onclick=()=>{mainArea.classList.remove('free-zone');zoneOverlay.style.display='none';rainbowSquare.style.display='none';controlsCluster.style.display='none';};

function startGame(){loginDiv.style.display='none';renderBottombarFromData();updateMoney();}
loginBtn.onclick=()=>{if(!usernameInput.value)return;playerData.username=usernameInput.value;saveData();startGame();}
if(localStorage.getItem('playerData')){playerData=JSON.parse(localStorage.getItem('playerData'));startGame();}

// === Movimiento del cuadrado Rainbow (Zona Libre) ===
const rainbow = document.getElementById("rainbowSquare");
let rainbowX = window.innerWidth / 2;
let rainbowY = window.innerHeight / 2;

const step = 28;

function placeSquare(){
  rainbow.style.left = rainbowX + "px";
  rainbow.style.top = rainbowY + "px";
}

btnUp.addEventListener('click', ()=>{ rainbowY -= step; placeSquare(); });
btnDown.addEventListener('click', ()=>{ rainbowY += step; placeSquare(); });
btnLeft.addEventListener('click', ()=>{ rainbowX -= step; placeSquare(); });
btnRight.addEventListener('click', ()=>{ rainbowX += step; placeSquare(); });

document.addEventListener("keydown", (e) => {
  if(!mainArea.classList.contains('free-zone')) return;
  const k = e.key.toLowerCase();
  if(k === "w") { rainbowY -= step; placeSquare(); }
  if(k === "s") { rainbowY += step; placeSquare(); }
  if(k === "a") { rainbowX -= step; placeSquare(); }
  if(k === "d") { rainbowX += step; placeSquare(); }
});

</script>
</body>
</html>
